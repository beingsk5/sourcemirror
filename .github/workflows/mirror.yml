name: Public SourceForge Mirror

on:
  workflow_dispatch:
    inputs:
      urls:
        required: true
        type: string
      job_id:
        required: true
        type: string

jobs:
  mirror:
    runs-on: ubuntu-latest

    steps:

      - name: Prepare
        run: |
          mkdir work
          echo "${{ inputs.urls }}" > urls.txt

      - name: Stage – validating
        run: |
          echo "validating" > stage.txt

      - name: Stage – downloading
        run: |
          echo "downloading" > stage.txt
          sleep 10

      - name: Stage – uploading
        run: |
          echo "uploading" > stage.txt
          sleep 10

      - name: Stage – verifying
        run: |
          echo "verifying" > stage.txt
          sleep 5

      - name: Upload stage artifact
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: stage
          path: stage.txt
